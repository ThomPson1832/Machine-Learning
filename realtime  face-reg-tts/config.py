# 导入必要的库
import os  # 操作系统接口，用于文件和目录操作
import logging  # 日志系统库，用于记录系统运行状态
from datetime import timedelta  # 时间间隔库，用于设置时间相关配置


# ==========================================
# 项目基础配置
# ==========================================
# 项目根目录 - 使用os.path模块获取当前文件所在目录的绝对路径
# 这是所有相对路径的基础，确保无论从哪个目录运行程序，路径都能正确解析
BASE_DIR = os.path.dirname(os.path.abspath(__file__))


# ==========================================
# 人脸数据库配置
# ==========================================
# 人脸数据库目录路径 - 存储人脸数据文件的文件夹
FACE_DB_DIR = os.path.join(BASE_DIR, 'face_database')
# 确保人脸数据库目录存在，如果不存在则自动创建
os.makedirs(FACE_DB_DIR, exist_ok=True)


# ==========================================
# 日志系统配置
# ==========================================
# 日志文件目录路径 - 存储系统日志的文件夹
LOG_DIR = os.path.join(BASE_DIR, 'logs')
# 确保日志目录存在，如果不存在则自动创建
os.makedirs(LOG_DIR, exist_ok=True)
# 日志文件路径 - 系统日志的具体保存位置
LOG_FILE = os.path.join(LOG_DIR, 'face_recognition.log')


# ==========================================
# 人脸识别配置
# ==========================================
# 人脸识别阈值 - 决定识别精度的参数，范围通常为0-1
# 值越低越严格，可减少误识别但可能增加未识别率
# 值越高越宽松，可提高识别率但可能增加误识别
RECOGNITION_TOLERANCE = 0.6

# 默认摄像头ID - 指定使用哪个摄像头进行视频捕获
# 0通常是默认摄像头，多摄像头系统可能需要调整
CAMERA_ID = 0

# 处理帧间隔 - 每处理N帧才进行一次人脸识别
# 用于降低CPU占用，提高系统性能
# 值越大，处理频率越低，CPU占用越少，但可能降低实时响应性
FRAME_PROCESS_INTERVAL = 5


# ==========================================
# 语音播报配置
# ==========================================
# 语音播报速度 - 控制语音合成的语速
# 中文播报通常在150-180之间较为自然
TTS_RATE = 150

# 语音播报音量 - 控制语音输出的音量大小
# 范围通常为0.0-1.0，1.0为最大音量
TTS_VOLUME = 1.0


# ==========================================
# 智能去重配置
# ==========================================
# 最短重复播报间隔 - 设置同一个人重复识别后的最小播报间隔时间
# 避免短时间内重复识别同一个人时产生过多重复播报
MIN_REPEAT_INTERVAL = timedelta(minutes=5)


# ==========================================
# 多人识别策略配置
# ==========================================
# 单次最多播报人数 - 控制同时识别到多个人时的最大播报数量
# 超过此数量的识别结果将被忽略，避免播报内容过长
MAX_ANNOUNCE_COUNT = 3

# 多人播报时的延迟时间 - 当同时识别到多人时，播报每个人名之间的间隔时间
# 提供更好的听觉体验，让用户能够清晰区分不同人的名字
ANNOUNCE_DELAY = 1.0


# ==========================================
# 日志级别
# ==========================================
# 系统日志的记录级别 - 控制日志输出的详细程度
# 可选值：DEBUG, INFO, WARNING, ERROR, CRITICAL
# 生产环境建议使用INFO或WARNING，开发调试可以使用DEBUG
LOG_LEVEL = logging.INFO


# ==========================================
# 异常处理配置
# ==========================================
# 最大重试次数 - 当系统遇到可恢复的错误时（如摄像头暂时不可用），自动重试的最大次数
# 超过此次数后系统将放弃重试并报错
MAX_RETRY_COUNT = 3