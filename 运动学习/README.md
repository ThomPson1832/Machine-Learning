# 运动分析软件

## 项目简介
基于普通摄像头的无标记3D运动分析软件，结合AI技术实现人体关键关节点识别和运动数据分析。软件采用实时视频处理技术，能够精确捕捉人体运动并计算相关运动参数，为运动科学、康复训练、体育教学等领域提供数据分析支持。

## 功能特性

### 核心功能
- **实时姿态检测**：基于MediaPipe的高精度人体关节点识别
- **3D运动分析**：精确还原人体三维运动轨迹
- **运动参数计算**：实时计算关节角度、速度和加速度
- **3D可视化**：直观展示人体运动的三维模型
- **实时视频处理**：支持摄像头实时采集和视频文件导入分析

### 数据处理
- **数据记录**：自动记录运动过程中的关键参数
- **数据导出**：支持CSV格式导出运动数据
- **图表可视化**：提供多种图表类型展示运动数据变化
- **数据管理**：支持清除历史数据和重新开始分析

### 视频功能
- **摄像头选择**：支持多摄像头切换
- **视频预览**：实时显示摄像头画面
- **视频录制**：支持录制分析过程视频
- **视频导入**：支持导入本地视频文件进行离线分析

## 技术栈
- **Python 3.8+**：主要开发语言
- **OpenCV**：视频处理和图像分析
- **MediaPipe**：人体姿态检测和关键点识别
- **NumPy**：数值计算和数据处理
- **SciPy**：科学计算和信号处理
- **PyQt5**：GUI界面开发
- **PyQtGraph**：实时数据可视化
- **Matplotlib**：图表绘制
- **scikit-learn**：数据处理和分析

## 界面介绍

### 主界面布局
- **左侧区域**：视频显示窗口，实时显示摄像头画面或导入的视频
- **右侧控制面板**：
  - **相机控制**：摄像头选择、预览和控制
  - **分析控制**：开始/停止运动分析
  - **3D可视化**：切换3D模型显示
  - **数据显示控制**：选择要显示的关节、数据类型和图表类型
  - **视频操作**：录制和导入视频
  - **数据管理**：导出和清除数据
  - **状态显示**：显示当前分析状态和FPS
  - **运动参数**：实时显示关节角度、速度和加速度（带滚动区域）

## 安装依赖

```bash
pip install -r requirements.txt
```

依赖库说明：
- opencv-python>=4.5.5.64：视频处理
- mediapipe>=0.8.11：姿态检测
- numpy>=1.21.6：数值计算
- scipy>=1.7.3：科学计算
- matplotlib>=3.5.3：图表绘制
- pyqt5>=5.15.7：GUI界面
- pyqtgraph>=0.12.4：实时数据可视化
- scikit-learn>=1.0.2：数据处理

## 运行程序

```bash
python main.py
```

## 使用说明

### 1. 初始化设置
- 启动程序后，系统会自动检测可用的摄像头
- 在"相机控制"区域选择合适的摄像头
- 点击"预览"按钮查看摄像头画面

### 2. 开始分析
- 确保摄像头画面正常显示
- 点击"开始分析"按钮启动运动检测
- 系统会实时计算并显示运动参数

### 3. 调整显示设置
- 在"数据显示控制"区域选择要查看的关节
- 选择需要显示的数据类型（角度、速度、加速度）
- 选择图表类型（折线图、波形图等）
- 点击"应用"按钮更新显示

### 4. 数据管理
- 分析完成后，点击"导出数据"按钮保存运动数据
- 点击"清除数据"按钮重置分析状态

### 5. 视频操作
- 点击"录制"按钮开始录制分析过程
- 点击"导入"按钮选择本地视频文件进行分析

## 功能详解

### 姿态检测
软件采用MediaPipe Pose模型进行实时姿态检测，能够识别33个关键关节点，包括头部、颈部、肩部、肘部、腕部、髋部、膝部和踝部等。

### 运动参数计算
- **关节角度**：计算相邻关节间的角度变化
- **关节速度**：基于时间序列的关节点位置变化率
- **关节加速度**：速度的变化率，反映运动的爆发力和控制能力

### 3D可视化
通过三维模型直观展示人体运动姿态，支持多角度观察，帮助用户更好地理解运动过程。

## 注意事项

1. 使用前请确保摄像头正常工作
2. 建议在光线充足的环境下使用，以提高检测精度
3. 运动分析时请保持适当的距离，确保全身在摄像头视野范围内
4. 首次运行时可能需要下载MediaPipe模型文件，请确保网络连接正常

## 常见问题

### Q: 为什么检测不到关节点？
A: 请检查摄像头是否正常工作，环境光线是否充足，以及是否有物体遮挡摄像头。

### Q: 如何提高检测精度？
A: 确保在光线充足的环境下使用，穿着颜色与背景有明显区别的衣物，保持全身在摄像头视野范围内。

### Q: 支持哪些视频格式导入？
A: 支持常见的视频格式，如MP4、AVI、MOV等。

## 版本历史

- v1.0.0 初始版本
  - 实现实时姿态检测
  - 支持关节角度、速度、加速度计算
  - 提供3D可视化功能
  - 支持数据导出和视频录制

## 开发者
贾常辉，本项目已推送Github仓库：https://github.com/ThomPson1832/Machine-Learning
本项目基于Python和开源库开发，欢迎贡献代码和提出改进建议。